{"ast":null,"code":"const BASE_URL = \"http://localhost:3000\";\nconst ATHLETE_VALIDATE_URL = BASE_URL + \"/athlete/validate\";\nconst COACH_VALIDATE_URL = BASE_URL + \"/coach/validate\";\nconst ATHLETE_LOGIN_URL = BASE_URL + \"/athlete/login\";\nconst COACH_LOGIN_URL = BASE_URL + \"/coach/login\";\nconst ATHLETE_SIGNUP_URL = BASE_URL + \"/athletes\";\nconst COACH_SIGNUP_URL = BASE_URL + \"/coaches\";\n\nconst jsonify = res => {\n  if (res.ok) {\n    return res.json();\n  } else {\n    throw res.json();\n  }\n};\n\nfunction loginAthlete(user) {\n  return fetch(ATHLETE_LOGIN_URL, createUserObj(user)).then(JSONresp).then(handleUserResponse);\n}\n\nfunction loginCoach(user) {\n  return fetch(COACH_LOGIN_URL, createUserObj(user)).then(JSONresp).then(handleUserResponse);\n}\n\nfunction createCoachAccount(user) {\n  return fetch(COACH_SIGNUP_URL, createUserObj(user)).then(JSONresp).then(handleUserResponse);\n}\n\nfunction createAthleteAccount(user) {\n  return fetch(ATHLETE_SIGNUP_URL, createUserObj(user)).then(JSONresp).then(handleUserResponse);\n}\n\nfunction createObj(obj) {\n  return {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept\": \"application/json\",\n      \"Authorisation\": localStorage.token\n    },\n    body: JSON.stringify(obj)\n  };\n}\n\nfunction JSONresp(resp) {\n  if (resp.ok) return resp.json();\n  throw resp.json();\n}\n\nfunction handleUserResponse(user) {\n  if (user.token) {\n    localStorage.token = user.token;\n    localStorage.account_type = user.account_type;\n  }\n\n  return user;\n}\n\nfunction createUserObj(user) {\n  return {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept\": \"application/json\"\n    },\n    body: JSON.stringify(user)\n  };\n}\n\nfunction validate() {\n  if (localStorage.account_type === \"athlete\") {\n    return fetch(ATHLETE_VALIDATE_URL, {\n      method: \"GET\",\n      headers: {\n        Authorisation: localStorage.token\n      }\n    }).then(JSONresp).then(handleUserResponse);\n  } else if (localStorage.account_type === \"coach\") {\n    return fetch(COACH_VALIDATE_URL, {\n      method: \"GET\",\n      headers: {\n        Authorisation: localStorage.token\n      }\n    }).then(JSONresp).then(handleUserResponse);\n  }\n}\n\nexport default {\n  loginAthlete,\n  loginCoach,\n  validate,\n  createCoachAccount,\n  createAthleteAccount,\n  hasToken: () => !!localStorage.token,\n  clearToken: () => localStorage.removeItem(\"token\") && localStorage.removeItem(\"account_type\")\n};","map":{"version":3,"sources":["/Users/farisaziz/Desktop/WODSHARE/WODSHARE_frontend/src/API.js"],"names":["BASE_URL","ATHLETE_VALIDATE_URL","COACH_VALIDATE_URL","ATHLETE_LOGIN_URL","COACH_LOGIN_URL","ATHLETE_SIGNUP_URL","COACH_SIGNUP_URL","jsonify","res","ok","json","loginAthlete","user","fetch","createUserObj","then","JSONresp","handleUserResponse","loginCoach","createCoachAccount","createAthleteAccount","createObj","obj","method","headers","localStorage","token","body","JSON","stringify","resp","account_type","validate","Authorisation","hasToken","clearToken","removeItem"],"mappings":"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","sourcesContent":["const BASE_URL = \"http://localhost:3000\";\nconst ATHLETE_VALIDATE_URL = BASE_URL + \"/athlete/validate\"\nconst COACH_VALIDATE_URL = BASE_URL + \"/coach/validate\"\nconst ATHLETE_LOGIN_URL = BASE_URL + \"/athlete/login\";\nconst COACH_LOGIN_URL = BASE_URL + \"/coach/login\";\nconst ATHLETE_SIGNUP_URL = BASE_URL + \"/athletes\";\nconst COACH_SIGNUP_URL = BASE_URL + \"/coaches\";\n\n\nconst jsonify = res => {\n    if (res.ok) {\n      return res.json();\n    } else {\n      throw res.json();\n    }\n  };\n\nfunction loginAthlete(user) {\n    \n    return fetch(ATHLETE_LOGIN_URL, createUserObj(user))\n        .then(JSONresp)\n        .then(handleUserResponse)\n} \n\nfunction loginCoach(user) {\n    \n    return fetch(COACH_LOGIN_URL, createUserObj(user))\n        .then(JSONresp)\n        .then(handleUserResponse)\n} \n\nfunction createCoachAccount(user) {\n    return fetch(COACH_SIGNUP_URL, createUserObj(user))\n        .then(JSONresp)\n        .then(handleUserResponse)\n}\n\nfunction createAthleteAccount(user) {\n    return fetch(ATHLETE_SIGNUP_URL, createUserObj(user))\n        .then(JSONresp)\n        .then(handleUserResponse)\n}\n\n\n\n\nfunction createObj(obj) {\n\n    return {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\",\n            \"Authorisation\": localStorage.token\n        },\n        body: JSON.stringify(obj)\n    }\n}\n\nfunction JSONresp(resp) {\n    if (resp.ok) return resp.json();\n    throw resp.json();\n}\n\nfunction handleUserResponse(user) {\n    if (user.token) {\n        localStorage.token = user.token;\n        localStorage.account_type = user.account_type\n    }\n    return user;\n}\n\nfunction createUserObj(user) {\n    return {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n    }\n}\n\nfunction validate() {\n    if (localStorage.account_type === \"athlete\") {\n        return fetch(ATHLETE_VALIDATE_URL, {\n            method: \"GET\",\n            headers: {\n                Authorisation: localStorage.token,\n            }\n        }).then(JSONresp).then(handleUserResponse);\n    } else if (localStorage.account_type === \"coach\") {\n        return fetch(COACH_VALIDATE_URL, {\n            method: \"GET\",\n            headers: {\n                Authorisation: localStorage.token,\n            }\n        }).then(JSONresp).then(handleUserResponse);\n    }\n}\n\nexport default {loginAthlete,\n    loginCoach,\n    validate,\n    createCoachAccount,\n    createAthleteAccount,\n    hasToken: () => !!localStorage.token,\n    clearToken: () => localStorage.removeItem(\"token\")  && localStorage.removeItem(\"account_type\")\n};"]},"metadata":{},"sourceType":"module"}