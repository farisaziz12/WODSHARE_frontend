{"ast":null,"code":"const BASE_URL = \"https://localhost:3000\";\nconst VALIDATE_URL = BASE_URL + \"/validate\";\nconst LOGIN_URL = BASE_URL + \"/login\";\nconst SIGNUP_URL = BASE_URL + \"/athletes\";\n\nfunction loginUser(user) {\n  return fetch(LOGIN_URL, createUserObj(user)).then(JSONresp).then(handleUserResponse);\n}\n\nfunction createObj(obj) {\n  return {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept\": \"application/json\",\n      \"Authorisation\": localStorage.token\n    },\n    body: JSON.stringify(obj)\n  };\n}\n\nfunction JSONresp(resp) {\n  if (resp.ok) return resp.json();\n  throw resp.json();\n}\n\nfunction handleUserResponse(user) {\n  if (user.token) {\n    localStorage.token = user.token;\n  }\n\n  return user;\n}\n\nfunction createUserObj(user) {\n  return {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Accept\": \"application/json\"\n    },\n    body: JSON.stringify({\n      user\n    })\n  };\n}\n\nfunction validate() {\n  return fetch(VALIDATE_URL, {\n    method: \"GET\",\n    headers: {\n      Authorisation: localStorage.token\n    }\n  }).then(JSONresp).then(handleUserResponse);\n}\n\nexport default {\n  loginUser,\n  signUp,\n  validate,\n  hasToken: () => !!localStorage.token,\n  clearToken: () => localStorage.removeItem(\"token\")\n};","map":{"version":3,"sources":["/Users/farisaziz/Desktop/WODSHARE/WODSHARE_frontend/src/API.js"],"names":["BASE_URL","VALIDATE_URL","LOGIN_URL","SIGNUP_URL","loginUser","user","fetch","createUserObj","then","JSONresp","handleUserResponse","createObj","obj","method","headers","localStorage","token","body","JSON","stringify","resp","ok","json","validate","Authorisation","signUp","hasToken","clearToken","removeItem"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,wBAAjB;AACA,MAAMC,YAAY,GAAGD,QAAQ,GAAG,WAAhC;AACA,MAAME,SAAS,GAAGF,QAAQ,GAAG,QAA7B;AACA,MAAMG,UAAU,GAAGH,QAAQ,GAAG,WAA9B;;AAEA,SAASI,SAAT,CAAmBC,IAAnB,EAAyB;AAErB,SAAOC,KAAK,CAACJ,SAAD,EAAYK,aAAa,CAACF,IAAD,CAAzB,CAAL,CACFG,IADE,CACGC,QADH,EAEFD,IAFE,CAEGE,kBAFH,CAAP;AAGH;;AAGD,SAASC,SAAT,CAAmBC,GAAnB,EAAwB;AAEpB,SAAO;AACHC,IAAAA,MAAM,EAAE,MADL;AAEHC,IAAAA,OAAO,EAAE;AACL,sBAAgB,kBADX;AAEL,gBAAU,kBAFL;AAGL,uBAAiBC,YAAY,CAACC;AAHzB,KAFN;AAOHC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,GAAf;AAPH,GAAP;AASH;;AAED,SAASH,QAAT,CAAkBW,IAAlB,EAAwB;AACpB,MAAIA,IAAI,CAACC,EAAT,EAAa,OAAOD,IAAI,CAACE,IAAL,EAAP;AACb,QAAMF,IAAI,CAACE,IAAL,EAAN;AACH;;AAED,SAASZ,kBAAT,CAA4BL,IAA5B,EAAkC;AAC9B,MAAIA,IAAI,CAACW,KAAT,EAAgB;AACZD,IAAAA,YAAY,CAACC,KAAb,GAAqBX,IAAI,CAACW,KAA1B;AACH;;AACD,SAAOX,IAAP;AACH;;AAED,SAASE,aAAT,CAAuBF,IAAvB,EAA6B;AACzB,SAAO;AACHQ,IAAAA,MAAM,EAAE,MADL;AAEHC,IAAAA,OAAO,EAAE;AACL,sBAAgB,kBADX;AAEL,gBAAU;AAFL,KAFN;AAMHG,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACd,MAAAA;AAAD,KAAf;AANH,GAAP;AAQH;;AAED,SAASkB,QAAT,GAAoB;AAChB,SAAOjB,KAAK,CAACL,YAAD,EAAe;AACvBY,IAAAA,MAAM,EAAE,KADe;AAEvBC,IAAAA,OAAO,EAAE;AACLU,MAAAA,aAAa,EAAET,YAAY,CAACC;AADvB;AAFc,GAAf,CAAL,CAKJR,IALI,CAKCC,QALD,EAKWD,IALX,CAKgBE,kBALhB,CAAP;AAMH;;AAED,eAAe;AAACN,EAAAA,SAAD;AACXqB,EAAAA,MADW;AAEXF,EAAAA,QAFW;AAGXG,EAAAA,QAAQ,EAAE,MAAM,CAAC,CAACX,YAAY,CAACC,KAHpB;AAIXW,EAAAA,UAAU,EAAE,MAAMZ,YAAY,CAACa,UAAb,CAAwB,OAAxB;AAJP,CAAf","sourcesContent":["const BASE_URL = \"https://localhost:3000\";\nconst VALIDATE_URL = BASE_URL + \"/validate\"\nconst LOGIN_URL = BASE_URL + \"/login\";\nconst SIGNUP_URL = BASE_URL + \"/athletes\";\n\nfunction loginUser(user) {\n    \n    return fetch(LOGIN_URL, createUserObj(user))\n        .then(JSONresp)\n        .then(handleUserResponse)\n} \n\n\nfunction createObj(obj) {\n\n    return {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\",\n            \"Authorisation\": localStorage.token\n        },\n        body: JSON.stringify(obj)\n    }\n}\n\nfunction JSONresp(resp) {\n    if (resp.ok) return resp.json();\n    throw resp.json();\n}\n\nfunction handleUserResponse(user) {\n    if (user.token) {\n        localStorage.token = user.token;\n    }\n    return user;\n}\n\nfunction createUserObj(user) {\n    return {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({user})\n    }\n}\n\nfunction validate() {\n    return fetch(VALIDATE_URL, {\n        method: \"GET\",\n        headers: {\n            Authorisation: localStorage.token,\n        }\n    }).then(JSONresp).then(handleUserResponse);\n}\n\nexport default {loginUser,\n    signUp,\n    validate,\n    hasToken: () => !!localStorage.token,\n    clearToken: () => localStorage.removeItem(\"token\")  \n};"]},"metadata":{},"sourceType":"module"}